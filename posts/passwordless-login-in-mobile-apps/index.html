<!DOCTYPE html>
<html lang="en-us">
<head>

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    


    
        <meta name="twitter:card" content="summary"/>
    



<meta name="twitter:title" content="Passwordless login in mobile apps"/>
<meta name="twitter:description" content=""/>
<meta name="twitter:site" content="@mderazon"/>



  	<meta property="og:title" content="Passwordless login in mobile apps &middot; Code and stuff" />
  	<meta property="og:site_name" content="Code and stuff" />
  	<meta property="og:url" content="https://www.drzon.net/posts/passwordless-login-in-mobile-apps" />

    
        
            <meta property="og:image" content="https://www.drzon.net/images/cover.jpg"/>
        
    

    
    <meta property="og:description" content="" />
  	<meta property="og:type" content="article" />
    <meta property="og:image" content="https://www.drzon.net/" />
    <meta property="article:published_time" content="2014-10-29T00:00:00Z" />

    
    <meta property="article:tag" content="mobile login" />
    
    <meta property="article:tag" content="authentication" />
    
    

    <title>Passwordless login in mobile apps &middot; Code and stuff</title>

    
    <meta name="description" content="" />
    

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="https://www.drzon.net/images/favicon.ico">
	  <link rel="apple-touch-icon" href="https://www.drzon.net/images/apple-touch-icon.png" />

    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="https://www.drzon.net/css/screen.css" />
    <link rel="stylesheet" type="text/css" href="https://www.drzon.net/css/nav.css" />
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:300,700,700i,300i|Alef:400,700|Open+Sans:700,400|Inconsolata" />

    

    
      
          <link href="https://www.drzon.net/index.xml" rel="alternate" type="application/rss+xml" title="Code and stuff" />
      
      
    
    <meta name="generator" content="Hugo 0.19" />

    <link rel="canonical" href="https://www.drzon.net/posts/passwordless-login-in-mobile-apps" />

    
      
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": ,
        "logo": https://www.drzon.net/images/selfie.png
    },
    "author": {
        "@type": "Person",
        "name": ,
        
        "image": {
            "@type": "ImageObject",
            "url": https://www.drzon.net/images/selfie.png,
            "width": 250,
            "height": 250
        }, 
        
        "url": https://www.drzon.net,
        "sameAs": [
            
            
             
             
             
             
             
            
        ]
    },
    "headline": Passwordless login in mobile apps,
    "name": Passwordless login in mobile apps,
    "wordCount": 1075,
    "timeRequired": "PT6M",
    "inLanguage": {
      "@type": "Language",
      "alternateName": en
    },
    "url": https://www.drzon.net/posts/passwordless-login-in-mobile-apps,
    "datePublished": 2014-10-29T00:00Z,
    "dateModified": 2014-10-29T00:00Z,
    
    "keywords": mobile login, authentication,
    "description": ,
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": https://www.drzon.net/posts/passwordless-login-in-mobile-apps
    }
}
    </script>
    


    

    
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-44481923-1', 'auto');
      ga('send', 'pageview');

    </script>
    

    
</head>
<body class="nav-closed">

  <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
        
        
        
    </ul>
    
    
    <a class="subscribe-button icon-feed" href="https://www.drzon.net/index.xml">Subscribe</a>
    
</div>
<span class="nav-cover"></span>


 <div class="site-wrapper">




<header class="main-header post-head no-cover">
  <nav class="main-nav clearfix">



  
      <a class="menu-button icon-feed" href="https://www.drzon.net/"><i class="fa fa-home" aria-hidden="true"></i>&nbsp;Home</a>
  
  </nav>
</header>



<main class="content" role="main">




  <article class="post post">

    <header class="post-header ">
        <h1 class="post-title">Passwordless login in mobile apps</h1>
        <small></small>

        <section class="post-meta">
        
          <time class="post-date" datetime="2014-10-29T00:00:00Z">
            Oct 29, 2014
          </time>
        
         
          <span class="post-tag small"><a href="https://www.drzon.net/tags/mobile-login/">#mobile login</a></span>
         
          <span class="post-tag small"><a href="https://www.drzon.net/tags/authentication/">#authentication</a></span>
         
        </section>
    </header>

    <section class='post-content '>
      

<p>This post touches some problems with traditional email logins in mobile apps and suggests a different approach to handle login without requiring the user to enter any password.</p>

<p>The post is not very technical. Other than occasionally mentioning &ldquo;client / server&rdquo; it doesn&rsquo;t talk about any specific framework / language. Instead, it tries to explain the overall flow and behaviour of passwordless login in mobile apps.</p>

<p>I might add some additional framework specific code examples later but for now it&rsquo;s mostly ideas.</p>

<h2 id="traditional-login">Traditional login</h2>

<p>Our app has always had an option to sign up with a social account - Facebook and Google+.
We started with social sign up because we thought it would make the log in process easy for the user. We quickly found out that people don&rsquo;t like logging in with their social accounts, I think it&rsquo;s due to bad reputation of apps posting all kind of junk on behalf of the user. The situation has changed since and most of the login providers have given a lot of privacy control back to the users but the bad rep is still there.</p>

<p><strong>I was mostly tired of the worn out email sign up flow which usually consists of the following separate requirements</strong>:</p>

<ol>
<li>Show a page with input field for email and password. Since the password is masked, need to either add another &ldquo;validate password&rdquo; input field or give the users an option to unmask the password to make sure they got it right.</li>
<li>If you want to make sure the email address is real (not all apps need this step), you need to send a verification email to the user.</li>
<li>Need to build a &ldquo;forgot my password&rdquo; flow.</li>
<li>Need to enforce some kind of password policy, so people won&rsquo;t put <code>1234</code> or <code>password</code> as their password (optional, but recommended).</li>
</ol>

<p>This is <strong>quite an overhead</strong> for just letting people use your app.</p>

<h2 id="passwordless-login">Passwordless login</h2>

<p>I was looking for a simpler solution when I came across a <a href="https://hacks.mozilla.org/2014/10/passwordless-authentication-secure-simple-and-fast-to-deploy/">nice blog post</a> by Mozilla engineers. The idea is this:
Why let people create crappy and insecure passwords to access your service when you can leverage other services that they have like gmail / outlook that already have a secure authentication system, probably better than what you can afford to build. The added value is that they won&rsquo;t need to remember a new password.</p>

<p>I took the idea in the blog and added a little twist to adjust it to mobile apps</p>

<h3 id="how-does-it-work">How does it work ?</h3>

<p>Think of it as taking the &ldquo;Reset password&rdquo; flow and making it the main flow to authenticate. In an nutshell:</p>

<ol>
<li>User enters an email address</li>
<li>An email with a one time token link is sent to the user.</li>
<li>User clicks the link in the mail</li>
<li>User is authenticated.</li>
</ol>

<p>Lets walk through the flow step by step</p>

<h4 id="step-1-get-the-user-s-email-address">Step 1. Get the user&rsquo;s email address</h4>

<p><img src="https://www.drzon.net/images/posts/email-signup.png" alt="" /></p>

<p>Notice the absence of a password field.</p>

<p>What happens behind the scenes here ?
- After hitting &ldquo;Continue&rdquo;, a call to the server is made with the name and the email address of the user.
- The server creates a one time token, saves it in some persistent storage (db / Redis etc). It&rsquo;s also a good practice to give an expiration to the token (one hour sounds like a good enough time).
- It then sends an email to the user with an activation link</p>

<p>After the email is sent, the call from the server returns back and the user is presented with the following screen:</p>

<p><img src="https://www.drzon.net/images/posts/email-sent.png" alt="" /></p>

<h4 id="step-2-user-gets-an-email">Step 2. User gets an email</h4>

<p>User gets the email we sent on step 1 and opens it.</p>

<p>The mail can say anything you like but it should have a clear call to action, like this button.</p>

<p><img src="https://www.drzon.net/images/posts/email.png" alt="" /></p>

<p>The &ldquo;Open app&rdquo; button contains a <em>deeplink</em> to the app with the token itself. Something like</p>

<pre><code class="language-html">&lt;a href=&quot;myapp://login?token=...&quot;&gt;Open app&lt;/a&gt;
</code></pre>

<p>You can learn about deeplinking on <a href="https://en.wikipedia.org/wiki/Mobile_deep_linking">Wikipedia</a>. Basically, almost all mobile platforms (Android / iOS included) let you link into your app from other apps by simply opening &ldquo;deep links&rdquo;. Intercepting and acting on these deep links is different on each platform and is out of the scope of this post.</p>

<h5 id="one-important-comment-about-this-step">One important comment about this step:</h5>

<p>Some email providers, Gmail most notably, don&rsquo;t let you put links with non standard url schemes (like <code>myapp://</code>) in html anchor <code>&lt;a&gt;</code> elements.</p>

<p>One easy way of circumventing this is to use the server as a proxy that redirects to the actual deep link url:
just create the following endpoint on the server:</p>

<pre><code>GET /login
</code></pre>

<p>Then the link can point there:</p>

<pre><code class="language-html">&lt;a href=&quot;https://api.myserver.com/login?token=...&quot;&gt;Open app&lt;/a&gt;
</code></pre>

<p>Which results in a <code>3xx</code> redirect from the server to <code>myapp://login?token=...</code></p>

<p>For really short second the user&rsquo;s mobile browser is opened but immediately after that the app opens up.</p>

<h4 id="step-3-user-clicked-the-link-in-the-email">Step 3. User clicked the link in the email</h4>

<p>So, let&rsquo;s assume the user opened your app from the deep link and you extracted the token from that link url param.</p>

<h5 id="what-should-i-do-with-the-token">What should I do with the token ?</h5>

<p>Once you have a token, you use it to call the server and authenticate the user. On the server side you need to check that the token is valid and that it hadn&rsquo;t been used before and perhaps check that it&rsquo;s not expired.</p>

<h4 id="step-4-user-is-authenticated">Step 4. User is authenticated</h4>

<p>At this point you validated the token and all looks well, it&rsquo;s a good time to create a session for the user for future calls so that the user won&rsquo;t have to authenticate again.</p>

<p>You can use any method for handling sessions like cookies / headers etc.</p>

<h2 id="conclusion">Conclusion</h2>

<p>From a user flow perspective, this method is much more smooth. Let&rsquo;s look at what we&rsquo;ve achieved:</p>

<ol>
<li>User only needs to put an email address in the sign up page. To make it even easier, we can pre-fill that email field for the user by extracting it from the device.</li>
<li>User doesn&rsquo;t need to think of / remember a password for yet another service.</li>
<li>In mobile apps, with deep linking, the process can&rsquo;t get any easier for the user - put email address &ndash;&gt; open mail &ndash;&gt; click the activation link &ndash;&gt; authenticated.</li>
<li>We leveraged a 3rd party service like Gmail to do the authentication for us and thus making it more secure as we don&rsquo;t need to store any hashed passwords in the backend.</li>
</ol>

<p>If you want to check out how it works in a real app, download CUPS - Unlimited Coffee for <a href="https://play.google.com/store/apps/details?id=com.citylifeapps.cups&amp;hl=en">Android</a> / <a href="https://itunes.apple.com/us/app/cups-unlimited-coffee/id556462755?mt=8">iOS</a> (shameless plug :)</p>

    </section>


  <footer class="post-footer">


    
    <figure class="author-image">
        <a class="img" href="https://www.drzon.net/" style="background-image: url(https://www.drzon.net/images/selfie.png)"><span class="hidden">Michael DeRazon's Picture</span></a>
    </figure>
    

    





<section class="author">
  <h4><a href="https://www.drzon.net/">Michael DeRazon</a></h4>
  
  <p>Read <a href="https://www.drzon.net/">more posts</a> by this author.</p>
  
  <div class="author-meta">
    <span class="author-location icon-location">New York, USA</span>
    <span class="author-link icon-link"><a href="https://www.drzon.net">https://www.drzon.net</a></span>
  </div>
</section>



    
<section class="share">
  <h4>Share this post</h4>
  <a class="icon-twitter" style="font-size: 1.4em" href="https://twitter.com/share?text=Passwordless%20login%20in%20mobile%20apps&nbsp;-&nbsp;Code%20and%20stuff&amp;url=https%3a%2f%2fwww.drzon.net%2fposts%2fpasswordless-login-in-mobile-apps"
      onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
      <span class="hidden">Twitter</span>
  </a>
  <a class="icon-facebook" style="font-size: 1.4em" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.drzon.net%2fposts%2fpasswordless-login-in-mobile-apps"
      onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
      <span class="hidden">Facebook</span>
  </a>
  <a class="icon-pinterest" style="font-size: 1.4em" href="http://pinterest.com/pin/create/button/?url=https%3a%2f%2fwww.drzon.net%2fposts%2fpasswordless-login-in-mobile-apps&amp;description=Passwordless%20login%20in%20mobile%20apps"
      onclick="window.open(this.href, 'pinterest-share','width=580,height=296');return false;">
      <span class="hidden">Pinterest</span>
  </a>
  <a class="icon-google-plus" style="font-size: 1.4em" href="https://plus.google.com/share?url=https%3a%2f%2fwww.drzon.net%2fposts%2fpasswordless-login-in-mobile-apps"
     onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
      <span class="hidden">Google+</span>
  </a>
</section>



    

<div id="disqus_thread"></div>
<script type="text/javascript">
  var disqus_shortname = 'drzone';
  var disqus_url = 'https:\/\/www.drzon.net\/posts\/passwordless-login-in-mobile-apps';
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>




  </footer>
</article>

</main>
    <footer class="site-footer clearfix">
        <section class="copyright"><a href="">Code and stuff</a> All rights reserved - 2017</section>
        
        <section class="poweredby">Proudly generated by <a class="icon-hugo" href="http://gohugo.io">HUGO</a>, hosted on <a class="icon-theme" href="https://github.com/mderazon/blog">Github</a></section>
        
    </footer>
    </div>
    
    
</body>
</html>

